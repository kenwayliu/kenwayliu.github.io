title: Cloudstack 4.2.1-快照测试案例
date: 2014-02-25 19:44:33
categories: CloudStack
comments: true
tags: 
        - IAAS
---


测试环境：

Vmware虚拟化

	centos5.3 x86_64 
    centos6.4 x86_64

vmware快照的组成：

	.vmdk ---delta的基础磁盘，当删除该虚机的所有快照时,所有创建的delta文件都将合并到原始的vmdk磁盘，如果删除一个单独的快照，那么他的delta的信息合并到父级，当恢复时无论恢复哪个快照，这个快照就是新的父级快照
    .vmsd ---用于存放快照的元数据和信息
    .vmsn ---快照的状态文件,用于存放快照的精准状态
    .vmss ---vmware暂停状态的文件,移动快照该文件自动删除

<!--more-->
##### 1.快照对象

1.1 实例
	
    实例的快照存储在主存储当中


1.2数据盘
	
    卷(数据磁盘和系统磁盘)的快照存储在二级存储中


##### 2.快照方式
	2.1普通快照(Disk)
    2.2内存快照(Disk+Memory)


##### 3.两者的区别
| 快照方式 | 快照速度 | 占用空间 | 数据可用程度 | 
|----------------------|---------------|--------------------------|--------|
|普通快照   |  快      | 和系统一样大,基于父级的增量备份| 冷数据完全恢复，热数据无法备份|
|内存快照   |  较慢   | 每次快照全备数据，占用系统空间大 | 同时备份冷数据和热数据,精确保持系统当前状态

冷数据：已经写到磁盘的数据

热数据：内存中的数据

